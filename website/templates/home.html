{% extends "base.html" %} {% block title %}Dashboard{% endblock %} {% block
content %}

<h1>Dashboard</h1>
<style>
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-family: georgia, serif;
  }
  body {
    font-family: Verdana, sans-serif;
  }
</style>
<!-- Progress Chart & Messages -->
<h3>Progress (Weekly)</h3>
<!-- Chart Buttons -->
<div class="chart-btns row">
  <form method="POST" action="/change_chart">
    <!-- y-axis (hours | tasks)-->
    <div
      class="btn-group col-2"
      role="group"
      aria-label="Basic radio toggle button group"
    >
      <input
        type="radio"
        class="btn-check form-control"
        name="y_axis_ch"
        id="hours_ch"
        value="hours_ch"
        autocomplete="off"
        checked
      />
      <label class="btn btn-outline-primary" for="hours_ch">hours</label>

      <input
        type="radio"
        class="btn-check form-control"
        name="y_axis_ch"
        id="tasks_ch"
        value="tasks_ch"
        autocomplete="off"
      />
      <label class="btn btn-outline-primary" for="tasks_ch">tasks</label>
    </div>
    <!-- End y-axis -->

    <!-- x-axis (daily | weekly | monthly)-->
    <div
      class="btn-group col-2"
      role="group"
      aria-label="Basic radio toggle button group"
    >
      <input
        type="radio"
        class="btn-check form-control"
        name="x_axis_ch"
        id="daily_ch"
        value="daily_ch"
        autocomplete="off"
        checked
      />
      <label class="btn btn-outline-primary" for="daily_ch">daily</label>

      <input
        type="radio"
        class="btn-check form-control"
        name="x_axis_ch"
        id="weekly_ch"
        value="weekly_ch"
        autocomplete="off"
      />
      <label class="btn btn-outline-primary" for="weekly_ch">weekly</label>

      <input
        type="radio"
        class="btn-check form-control"
        name="x_axis_ch"
        id="monthly_ch"
        value="monthly_ch"
        autocomplete="off"
      />
      <label class="btn btn-outline-primary" for="monthly_ch">monthly</label>
    </div>
    <!-- End x-axis -->
    <div
      class="col btn-group"
      role="group"
      style="margin-left: 25%; margin-top: 0"
    >
      <button type="submit" class="btn btn-primary">Chart</button>
    </div>
  </form>
</div>
<!-- End Chart Buttons -->

<div class="progres row">
  <!-- Bar Chart -->
  <div class="progress-chart col-8">
    <canvas id="myChart" width="200" height="200"></canvas>
  </div>
  <!-- End Bar Chart -->

  <div class="progress-message col text-center">
    <div>
      <h5>
        <span class="material-symbols-outlined"> schedule </span>Time Studied
      </h5>
      <p>
        <font>{{time_studied.split(':')[0]}}</font> hours
        <font>{{time_studied.split(':')[1]}}</font> min
      </p>
    </div>
    <h5>
      <span class="material-symbols-outlined"> task </span>Tasks Completed
    </h5>
    <p><font>{{tasks_completed}}</font> tasks</p>
  </div>
</div>
<!-- End Progress Chart & Messages -->

<!-- Goal Chart & Messages -->
<h3>Goals (this week)</h3>
<div class="goal row text-center">
  <div class="col">
    <!-- Pie Chart -->
    <div class="goal-chart">
      <canvas id="myPieChartTasks" width="400" height="400"></canvas>
    </div>
    <button onclick="addTaskCompleted()">Add Task Completed</button>
    <!-- End Pie Chart -->

    <p>You still need <font>5</font> more tasks.</p>
  </div>
  <div class="col">
    <!-- Pie Chart -->
    <div class="goal-chart">
      <canvas id="myPieChartDuration" width="400" height="400"></canvas>
    </div>
    <button onclick="addHoursCompleted()">Add Hours Completed</button>
    <!-- End Pie Chart -->
    <p>You still need <font>5</font> more hours.</p>
  </div>
</div>
<!-- end Goal Chart & Messages -->

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- Bar Chart JS -->
<script>
  const ctx = document.getElementById("myChart");
  let x_axis = JSON.parse({{x_axis | tojson}});
  let y_axis = JSON.parse({{y_axis | tojson}});
  new Chart(ctx, {
    type: "bar",
    data: {
      labels: x_axis,
      datasets: [
        {
          label: "Tasks Completed per Day",
          data: y_axis,
          backgroundColor: ["#E8B59C"],
          borderWidth: 1,
        },
      ],
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      scales: {
        x: {
          display: true,
        },
        y: {
          display: true,
          beginAtZero: true,
        },
      },
    },
  });
</script>
<!-- End Bar Chart JS-->

<!--PIE CHART JS-->
<script>
  const ctx1 = document.getElementById("myPieChartTasks");

  const myPieTasks = new Chart(ctx1, {
    type: "pie",
    data: {
      labels: ["Tasks Completed", "Tasks Remaining"],
      datasets: [
        {
          label: "# of Tasks",
          data: [20, 5],
          backgroundColor: ["#E8B59C", "#E8E3D9"],
          borderWidth: 1,
        },
      ],
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      scales: {
        x: {
          display: false,
        },
        y: {
          display: false,
          beginAtZero: true,
        },
      },
    },
  });

  function addTaskCompleted() {
    if (myPieTasks.config.data.datasets[0].data[1] > 0) {
      myPieTasks.config.data.datasets[0].data[0] += 1;
      myPieTasks.config.data.datasets[0].data[1] -= 1;
    }

    myPieTasks.update();
  }
</script>
<!-- End Pie Chart JS -->

<!--PIE CHART TASKS-->

<script>
  const ctx2 = document.getElementById("myPieChartDuration");

  const myPieDuration = new Chart(ctx2, {
    type: "pie",
    data: {
      labels: ["Time Completed", "Time Remaining"],
      datasets: [
        {
          label: "# of Hours",
          data: [20, 4],
          backgroundColor: ["#E8B59C", "#E8E3D9"],
          borderWidth: 1,
        },
      ],
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      scales: {
        x: {
          display: false,
        },
        y: {
          display: false,
          beginAtZero: true,
        },
      },
    },
  });

  function addHoursCompleted() {
    if (myPieDuration.config.data.datasets[0].data[1] > 0) {
      myPieDuration.config.data.datasets[0].data[0] += 1;
      myPieDuration.config.data.datasets[0].data[1] -= 1;
    }

    myPieDuration.update();
  }
</script>
{% endblock %}
